from urllib.request import urlopen as uReq
from bs4 import BeautifulSoup as soup
 
my_url_players = 'https://www.basketball-reference.com/boxscores/200511050LAC.html'
uClient_players = uReq(my_url_players)
page_html = uClient_players.read()
uClient_players.close()

players_page_soup = soup(page_html, "html.parser")
players_containers = players_page_soup.findAll('div', {'class':'overthrow table_container'})
away_players = players_containers[0].findAll('th', {'data-stat':'player'})
del away_players[0]
del away_players[-1]
home_players = players_containers[2].findAll('th', {'data-stat':'player'})
del home_players[0]
del home_players[-1]

away_players_list = []
for i in away_players:
    away_players_list.append(i.text)
    
home_players_list = []
for i in home_players:
    home_players_list.append(i.text)

x = []
for i in test:
    if i in test2:
        x.append(i)
    if len(x) > 1:
        print(max(x))

foul_keywords = ['block', 'personal block', 'flagrant', 'take', 'defensive', 
                 'shooting', 'technical', 'blocking', 'loose ball', 'offensive',
                 'holding', 'personal', 'blocking']
foul_keywords_pro = ['offensive', 'personal']

foul_keywords = ['personal block', 'personal foul', 'personal shooting', 'personal defensive',
                 'personal technical', 'personal blocking', 'personal offensive',
                 'personal holding', 'personal blocking', 'block', 'shooting', 'defensive', 
                 'technical', 'personal', 'blocking', 'flagrant', 'take', 'loose ball', 
                 'offensive', 'holding']

# gets foul type
def foul_type_get(sentence):
    x = []
    for foul in foul_keywords:
        if foul in sentence.lower():
            x.append(foul)
    global foul_type 
    foul_type = max(x)
    print(foul_type)

players_list = away_players_list + home_players_list

def abb_player_name(team_list):
    global abbNames
    abbNames = []
    for i in players_list:
        try:
            x = i[0] + '.' + ' ' + i.split()[1]
            abbNames.append(x)
        except IndexError:
            continue

y = []        
for i in abbNames:
    if i in sentence:
        y.append(i)

if sentence.index(y[0]) > sentence.index(y[1]):
    drawn_by = y[0]
    foul_by = y[1]
else:
    drawn_by = y[1]
    foul_by = y[0]
for i in players_list:
    if foul_by.split()[1].lower() in i.lower():
        foul_by = i
for i in players_list:
    if foul_drawn.split()[1].lower() in i.lower():
        foul_drawn = i
        
